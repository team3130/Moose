package frc.robot.sensors.vision;import edu.wpi.first.math.MatBuilder;import edu.wpi.first.math.Matrix;import edu.wpi.first.math.Nat;import edu.wpi.first.math.VecBuilder;import edu.wpi.first.math.numbers.N1;import edu.wpi.first.math.numbers.N3;import org.ejml.simple.SimpleMatrix;class Algebra {public static Matrix<N3,N1> buildVector(double x, double y, double z) {return new VecBuilder<>(Nat.N3()).fill(x,y,z);}public static Matrix<N3,N3> Rodrigues(Matrix<N3,N1> rvec) {if (rvec.getNumRows() != 3 || rvec.getNumCols() != 1) {throw new IllegalArgumentException("Rotation vector must be 3-dimensional but nRows = " + rvec.getNumRows() + ", nCols = " + rvec.getNumCols());}final double theta = rvec.normF();if (theta == 0.0) return new Matrix<>(SimpleMatrix.identity(3));Matrix<N3,N1> k = rvec.times(1/theta);Matrix<N3,N3> K = new MatBuilder<N3,N3>(Nat.N3(),Nat.N3()).fill(0.0,  -k.get(2,0),  k.get(1,0),k.get(2,0),  0.0,  -k.get(0,0),-k.get(1,0),  k.get(0,0),  0.0);Matrix<N3,N3> K2 = K.times(K);Matrix<N3,N3> R = new Matrix<>(SimpleMatrix.identity(3).plus( Math.sin(theta),  K.getStorage().plus(1 - Math.cos(theta), K2.getStorage()))); return R;}}